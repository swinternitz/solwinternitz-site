<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RetroPie Jumpbox (Fan Control, Networking, PS1 CHD Pipeline) | Solomon Winternitz</title>
  <meta name="description" content="RetroPie / Raspberry Pi build notes: fan control, networking/SSH, ROM library workflow, and PS1 CHD + M3U pipeline." />
  <link rel="stylesheet" href="/assets/site.css" />
  <script src="/assets/theme.js" defer></script>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>RetroPie / Jumpbox</h1>
        <div class="sub">
          A detailed build article + living checklist: fan control, networking/SSH, and my PS1 CHD + M3U library pipeline.
        </div>

        <div class="meta-row">
          <span class="pill">RetroPie</span><span class="pill">Raspberry Pi</span><span class="pill">Build log</span><span class="pill">Living doc</span>
        </div>
      </div>

      <nav class="nav" aria-label="Primary navigation">
        <a href="/">Home</a>
        <a href="/food/">Food</a>
        <a href="/projects/" aria-current="page">Projects</a>
        <a href="/photos/">Photos</a>
        <a href="https://github.com/swinternitz">GitHub</a>
        <button class="pill mode" id="theme-toggle" type="button" onclick="window.__toggleTheme && window.__toggleTheme()">Mode</button>
      </nav>
    </div>

    <section class="card">
      <h2>Executive summary</h2>
      <p>
        This page is the public-friendly version of my RetroPie “Jumpbox” handoff notes: what I built, why I built it,
        what’s currently working, and the exact commands/config paths that matter. The goal is to keep this practical—so I can
        pick up where I left off after a long break, and so other RetroPie builders can replicate the setup.
      </p>

      <div style="margin-top:10px;">
        <a class="pill" href="#hardware">Hardware</a>
        <a class="pill" href="#networking">Networking / SSH</a>
        <a class="pill" href="#fan">Fan control</a>
        <a class="pill" href="#ps1">PS1 pipeline (CHD + M3U)</a>
        <a class="pill" href="#todo">Living checklist</a>
      </div>
    </section>

    <section class="card" id="hardware">
      <h2>Hardware + enclosure</h2>
      <ul>
        <li><strong>Core:</strong> Raspberry Pi RetroPie build used as a living “jumpbox” for emulation.</li>
        <li><strong>Cooling:</strong> fan driven through a MOSFET board, controlled by a Pi GPIO line.</li>
        <li><strong>Case:</strong> a mini NES‑style 3D printed enclosure (I modified the print slightly to fit the Pi 4 and airflow).</li>
      </ul>

      <div class="note">
        <strong>Case credit:</strong> I’m tracking down the original model link + author so I can credit it properly. (If you recognize the case, tell me and I’ll link it.)
      </div>
    </section>

    <section class="card" id="networking">
      <h2>Networking and SSH (what was fixed)</h2>
      <p>
        The Pi is on my home network at <strong>192.168.68.76</strong>. A prior issue was instability around network state and SSH
        prompts while doing bulk transfers. The current approach is: verify network, ensure stable routes, and then use SSH keys
        for repeated SCP without password prompts.
      </p>

      <h3>Quick diagnostics (Pi)</h3>
      <pre><code>ip -br a
ip route
nmcli device status
nmcli connection show</code></pre>

      <h3>Known-good Windows cleanup</h3>
      <pre><code>ssh-keygen -R 192.168.68.76
ssh sol@192.168.68.76</code></pre>

      <div class="callout small">
        <strong>Status:</strong> passwordless SSH was being set up (recommended for bulk SCP without prompts). See the master handoff doc for the exact steps and any session-specific notes.
      </div>
    </section>

    <section class="card" id="fan">
      <h2>Fan control (gpio-fan + userspace hysteresis)</h2>
      <p>
        Cooling is handled with the kernel <code>gpio-fan</code> overlay plus a simple userspace controller that implements explicit on/off thresholds.
        This avoids “fan flapping” and keeps the system quiet under light loads.
      </p>

      <h3>Kernel overlay</h3>
      <pre><code>dtoverlay=gpio-fan,gpiopin=24,temp=80  # /boot/firmware/config.txt</code></pre>

      <h3>Userspace controller</h3>
      <ul>
        <li><code>/usr/local/sbin/gpiofanctl</code> (controller script)</li>
        <li><code>/etc/systemd/system/gpiofanctl.service</code> (systemd unit)</li>
        <li><code>/sys/class/thermal/thermal_zone0/temp</code> (temperature source)</li>
        <li><code>/sys/class/thermal/cooling_device0/cur_state</code> (fan state)</li>
      </ul>

      <h3>Thresholds (verified)</h3>
      <pre><code># /usr/local/sbin/gpiofanctl
ON=68000     # 68.0 C
OFF=59000    # 59.0 C</code></pre>

      <div class="note">
        <strong>Why hysteresis matters:</strong> it reduces rapid cycling, which is noisy and can be hard on the fan.
      </div>
    </section>

    <section class="card" id="ps1">
      <h2>PS1 library pipeline (CHD + M3U)</h2>
      <p>
        PS1 discs are standardized to <strong>CHD</strong> format (compressed, single-file), with <strong>M3U playlists</strong> for multi-disc titles.
        Conversion happens on my Windows PC (faster), then I bulk upload to the Pi.
      </p>

      <h3>PSX emulator defaults (Pi)</h3>
      <pre><code>/opt/retropie/configs/psx/emulators.cfg
default = lr-pcsx-rearmed
(optional installed: lr-duckstation)</code></pre>

      <h3>High-level workflow</h3>
      <ol>
        <li>Convert BIN/CUE to CHD on PC.</li>
        <li>Create <code>.m3u</code> playlists for multi-disc games.</li>
        <li>Upload CHD + M3U to the Pi in one go (use SSH keys to avoid repeated prompts).</li>
        <li>To keep EmulationStation clean, hide per-disc CHDs (dot-prefix) and point the M3U at the hidden files.</li>
      </ol>

      <div class="callout small">
        <strong>Library hygiene detail:</strong> A Pi-side title snapshot/skip list is used to avoid re-converting duplicates during PC-side batch runs.
      </div>

      <h3>Pi ownership fix (when needed)</h3>
      <pre><code>sudo chown -R sol:sol /home/sol/RetroPie/roms/psx</code></pre>
    </section>

    <section class="card" id="todo">
      <h2>Living checklist</h2>
      <ul>
        <li>Add photos of the completed build, internal wiring, and airflow/fan placement.</li>
        <li>Finalize SSH key-based transfer flow for bulk library updates.</li>
        <li>Finish PS1 library conversion pass + multi-disc playlist cleanup.</li>
        <li>Write the “public” RetroPie subreddit post linking back to this build page once it’s tight.</li>
      </ul>
      <div class="note">
        This page is intentionally detailed, but it’s still a living doc. When I do a work session, I’ll append a dated update and keep the commands/canonical paths correct.
      </div>
    </section>

    <footer>
      © <span id="y"></span> Solomon Winternitz
    </footer>
  </div>

  <script>
    // year
    (function(){ var y=document.getElementById('y'); if(y) y.textContent=(new Date()).getFullYear(); })();
  </script>
</body>
</html>
